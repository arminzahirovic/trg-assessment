<div class="cars-table">
    <div class="header">
        <h2>Cars</h2>
        <mat-spinner
            *ngIf="loading | async"
            [diameter]="30">
        </mat-spinner>
        <button
            mat-flat-button
            color="primary"
            (click)="addCar()">
            Add new car
        </button>
    </div>

    <mat-form-field>
        <mat-label>Filter</mat-label>
        <input
            matInput
            (keyup)="applyFilter($event)"
            placeholder="Ex. BMW"
            #input>
    </mat-form-field>

    <div class="mat-elevation-z8 table-container">
        <table
            mat-table
            [dataSource]="dataSource"
            matSort>
            <ng-container matColumnDef="id">
            <th
                mat-header-cell
                *matHeaderCellDef>
                Id
            </th>
            <td
                mat-cell
                *matCellDef="let car">
                {{ car.id }}
            </td>
            </ng-container>
        
            <ng-container matColumnDef="brand">
            <th
                mat-header-cell
                *matHeaderCellDef>
                Brand
            </th>
            <td
                mat-cell
                *matCellDef="let car">
                {{ car.brand }}
            </td>
            </ng-container>

            <ng-container matColumnDef="model">
                <th
                mat-header-cell
                *matHeaderCellDef>
                Model
                </th>
                <td
                mat-cell
                *matCellDef="let car">
                {{ car.model }}
                </td>
            </ng-container>

            <ng-container matColumnDef="driver">
                <th
                mat-header-cell
                *matHeaderCellDef>
                Assigned Driver
                </th>
                <td
                mat-cell
                *matCellDef="let car">
                {{ car.driver?.name }}
                </td>
            </ng-container>

            <ng-container matColumnDef="edit">
                <th
                    mat-header-cell
                    *matHeaderCellDef>
                    Edit
                </th>
                <td
                    mat-cell
                    *matCellDef="let car">
                    <button
                        mat-flat-button
                        color="accent"
                        (click)="editCar(car)">
                        Edit
                    </button>
                </td>
            </ng-container>

            <ng-container matColumnDef="delete">
                <th
                    mat-header-cell
                    *matHeaderCellDef>
                    Delete
                </th>
                <td
                    mat-cell
                    *matCellDef="let car">
                    <button
                        mat-flat-button
                        color="warn"
                        (click)="deleteCar(car.id)">
                        Delete
                    </button>
                </td>
            </ng-container>
        
            <tr
                mat-header-row
                *matHeaderRowDef="displayedColumns">
            </tr>
            <tr
                mat-row
                *matRowDef="let row; columns: displayedColumns;">
            </tr>
    </table>

    <mat-paginator
            [pageSizeOptions]="[5, 10, 25, 100]"
            aria-label="Select page of users">
    </mat-paginator>
    </div>
</div>